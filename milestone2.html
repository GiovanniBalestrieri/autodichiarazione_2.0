<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      var labelIndex = 0;
      var home_image = 'resources/home.png';
      var dest_image = 'resources/dest.png';
      var dot_image = 'resources/dot.png';

      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lng:5.7063 , lat: 45.1786 },
          zoom: 16
        });

        var directionsService = new google.maps.DirectionsService();


        var myLatLng = {lng: 5.712608, lat: 45.176793};
        var homeLatLng = {lng: 5.7148, lat: 45.1797};
        var destLatLng = {lng: 5.7134, lat: 45.1732};



        var homeLatLng_gmap = new google.maps.LatLng(homeLatLng['lng'],homeLatLng['lat']);
        var destLatLng_gmap = new google.maps.LatLng(destLatLng['lng'],destLatLng['lat']);

        var homeLatLng_gmap = new google.maps.LatLng( 45.1797, 5.7148 );
        var destLatLng_gmap = new google.maps.LatLng( 45.1732, 5.7134  );

        calculateAndDisplayRoute( directionsService, homeLatLng_gmap, destLatLng_gmap );

        // Add a marker at the center of the map.
        addUserMarker(myLatLng, map);
        addTargetMarker(homeLatLng, map, home_image);
        addTargetMarker(destLatLng, map, dest_image);

      }

      function addUserMarker(location, map) {
        // Add the marker at the clicked location, and add the next-available label
        // from the array of alphabetical characters.
        var marker = new google.maps.Marker({
          position: location,
          label: labels[labelIndex++ % labels.length],
          map: map
        });
      }

      function addTargetMarker(location, map, image) {
        var marker = new google.maps.Marker({
          position: location,
          map: map,
          icon: image
        });
      }

      function calculateAndDisplayRoute(directionsService, from, to) {
         directionsService.route(
             {
               origin: from,
               destination: to,
               travelMode: 'WALKING'
             },
             function(response, status) {
               if (status === 'OK') {
                 //console.log(response);
                 var pointsArray = [];
                 pointsArray = response.routes[0].overview_path;
                 for ( var i=0; i < pointsArray.length; i++) {
                   addTargetMarker(pointsArray[i], map,dot_image);
                 }
               } else {
                 window.alert('Directions request failed due to ' + status);
               }
             });
       }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDL-zzjmQatF12WWG2umtqjRJBSz9ovGOc&callback=initMap"
    async defer></script>
  </body>
</html>
